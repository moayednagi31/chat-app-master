{"version":3,"sources":["AppRoute.js","components/Error.js","components/Avatar.js","assets/avatar.png","components/chat/ContactHeader.js","components/chat/Contact.js","components/chat/Contacts.js","components/chat/ChatHeader.js","components/chat/Message.js","components/chat/Messages.js","components/chat/MessageForm.js","components/side/UserProfile.js","components/side/EditProfile.js","Auth.js","views/Chat.js","views/NotFound.js","assets/logo.png","views/Register.js","views/Login.js","views/Password.js","App.js","serviceWorker.js","index.js"],"names":["AppRoute","Component","component","can","redirect","rest","render","props","to","Error","error","Alert","color","Avatar","src","file","className","alt","ContactHeader","Row","user","avatar","onClick","toggle","Contact","contact","status","name","message","content","moment","date","format","unseen","Badge","Contacts","state","search","onSearch","e","setState","target","value","renderContact","index","includes","messages","filter","sender","id","receiver","lastMessage","length","seen","onChatNavigate","bind","Input","onChange","this","placeholder","contacts","map","React","withRouter","style","padding","justifyContent","cursor","typing","fromNow","marginLeft","Button","console","log","onCall","UncontrolledDropdown","DropdownToggle","tag","DropdownMenu","DropdownItem","history","push","divider","logout","Message","outgoing","Messages","renderMessage","MessageForm","lastType","onSend","Date","getTime","onKeyDown","key","shiftKey","sendType","preventDefault","type","rows","UserProfile","open","about","EditProfile","showFileUpload","fileUpload","current","click","onImageChange","files","image","URL","createObjectURL","onSubmit","data","FormData","append","axios","post","then","catch","err","response","onClose","createRef","overflow","Form","ref","required","autoComplete","block","Auth","init","JSON","parse","localStorage","getItem","defaults","headers","common","token","login","setItem","stringify","removeItem","auth","guest","getToken","setUser","newProfile","Chat","userProfile","profile","connected","timeout","callState","incomingCallModal","callerInfo","localStream","remoteStream","peerConnection","pendingOffer","initSocketConnection","socket","socketIO","process","query","on","onData","onNewMessage","updateUsersState","onTypingMessage","onSocketError","from","callerName","sdp","caller","handleOffer","callee","desc","RTCSessionDescription","setRemoteDescription","candidate","addIceCandidate","RTCIceCandidate","endCall","createAnswer","answer","setLocalDescription","emit","initiateCall","recipientId","username","navigator","mediaDevices","getUserMedia","audio","video","stream","getAudioTracks","createPeerConnection","getTracks","forEach","track","label","addTrack","createOffer","offer","acceptCall","callerId","rejectCall","RTCPeerConnection","iceServers","urls","onicecandidate","event","targetId","ontrack","streams","onconnectionstatechange","connectionState","close","stop","users","newMessages","concat","clearTimeout","setTimeout","element","sendMessage","disconnect","renderChat","filtered","m","userProfileToggle","profileToggle","audioEl","srcObject","autoPlay","Modal","isOpen","ModalHeader","ModalBody","ModalFooter","Spinner","NotFound","Register","password","res","Logo","getFullYear","Login","Password","newPassword","Card","logo","width","App","path","exact","Boolean","window","location","hostname","match","ReactDOM","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ca8f67a8.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\n/**\r\n *  AppRoute Component.\r\n * @param Component\r\n * @param can\r\n * @param redirect\r\n * @param rest\r\n */\r\nconst AppRoute = ({component: Component, can = () => true, redirect, ...rest}) => (\r\n    <Route {...rest} render = {(props) => (\r\n        can() ? <Component {...props} /> : <Redirect to={redirect} />\r\n    )} />\r\n);\r\n\r\nexport default AppRoute;","import React from 'react';\nimport { Alert } from 'reactstrap';\n\n/**\n * Error Component.\n * @param props\n */\nconst Error = props => (\n    props.error ? <Alert color='danger'>{props.error}</Alert> : ''\n);\n\nexport default Error;","import React from \"react\";\nimport avatar from \"assets/avatar.png\";\n\n/**\n * Avatar Component.\n * @param props\n */\nconst Avatar = props => {\n   let src = props.src ? `uploads/${props.src}` : avatar;\n   return <img src={props.file || src} className=\"img-fluid rounded-circle ml-3 avatar\" alt=\"\" />\n};\n\nexport default Avatar;","export default \"data:image/png;base64,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\"","import React from \"react\";\nimport Avatar from \"components/Avatar\";\nimport { Row } from \"reactstrap\";\n\n/**\n * Contacts Header.\n */\nconst ContactHeader = (props) => (\n  <Row className=\"heading\">\n    {/* Use optional chaining (?) to safely access avatar */}\n    <Avatar src={props.user?.avatar} />\n    <div>Contacts</div>\n    <div className=\"mr-auto nav-link\" onClick={props.toggle}>\n      <i className=\"fa fa-bars\" />\n    </div>\n  </Row>\n);\n\nexport default ContactHeader;\n","import React from \"react\";\nimport Avatar from \"components/Avatar\";\nimport moment from 'moment';\nimport { Badge } from 'reactstrap';\n\n/**\n * Contact Item.\n */\nconst Contact = props => (\n   <div className=\"contact\">\n       <div>\n           <Avatar src={props.contact.avatar} />\n           {props.contact.status === true ? <i className='fa fa-circle online' /> : ''}\n       </div>\n       <div className=\"w-50\">\n           <div className=\"name\">{props.contact.name}</div>\n           <div className=\"small last-message\">\n               {props.message ? props.message.content : 'Click here to start the conversation'}\n           </div>\n       </div>\n       <div className=\"flex-grow-1 text-left\">\n           <div className=\"small text-muted\">\n               {props.message ? moment(props.message.date).format(\"hh:mm a\") : ''}\n           </div>\n           { props.unseen > 0 ? <Badge color=\"success\">{props.unseen}</Badge> : ''}\n       </div>\n   </div>\n);\n\nexport default Contact;\n","import React from \"react\";\nimport Contact from \"./Contact\";\nimport { Row, Input } from 'reactstrap';\n\n/**\n * Contacts.\n */\nclass Contacts extends React.Component {\n\n    state = { search: ''};\n\n    /**\n     * Handle search event.\n     */\n    onSearch = e => this.setState({search: e.target.value});\n\n    /**\n     * Render component.\n     */\n    render(){\n       return (\n           <div className=\"list\">\n                <Row className=\"search\">\n                    <Input onChange={this.onSearch} placeholder=\"Search\" />\n                </Row>\n               <Row id=\"contacts\">\n                    {this.props.contacts.map((contact, index) => this.renderContact(contact, index) )}\n               </Row>\n           </div>\n       );\n   }\n\n    /**\n     * Render single contact.\n     * @param contact\n     * @param index\n     */\n    renderContact = (contact, index) => {\n       if(!contact.name.includes(this.state.search)) return;\n       let messages = this.props.messages.filter(e => e.sender === contact.id || e.receiver === contact.id);\n       let lastMessage = messages[messages.length - 1];\n       let unseen = messages.filter(e => !e.seen && e.sender === contact.id).length;\n       return(\n           <div className=\"w-100\" key={index} onClick={this.props.onChatNavigate.bind(this, contact)}>\n               <Contact contact={contact} message={lastMessage} unseen={unseen}/>\n           </div>\n       );\n   }\n}\nexport default Contacts;\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport Avatar from \"components/Avatar\";\nimport {\n  Row,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n  Button\n} from \"reactstrap\";\nimport moment from \"moment\";\n\n/**\n * Chat Header.\n */\nconst ChatHeader = (props) => {\n  const status = () => {\n    if (props.typing) return \"Typing now\";\n    if (props.contact.status === true) return \"Online now\";\n    if (props.contact.status) return moment(props.contact.status).fromNow();\n    return \"\";\n  };\n\n  const handleCall = () => {\n    console.log(\"[ChatHeader] Call button clicked\");\n    if (props.onCall) {\n      props.onCall(props.contact);\n    }\n  };\n\n  return (\n    <Row\n      className=\"heading m-0 align-items-center w-100\"\n      style={{ padding: \"0.5rem\", justifyContent: \"space-between\" }}\n    >\n      {/* LEFT: Avatar + name/status */}\n      <div\n        className=\"d-flex align-items-center\"\n        onClick={props.toggle}\n        style={{ cursor: \"pointer\" }}\n      >\n        <Avatar src={props.contact?.avatar} />\n        <div className=\"text-left ml-2\">\n          <div>{props.contact?.name || \"\"}</div>\n          <small>{status()}</small>\n        </div>\n      </div>\n\n      {/* RIGHT: Call button + three-dots side by side */}\n      <div className=\"d-flex align-items-center\" style={{ marginLeft: \"0.5rem\" }}>\n        {/* Call button (green) */}\n        <Button color=\"success\" onClick={handleCall} className=\"mr-2\">\n          <i className=\"fa fa-phone\" />\n        </Button>\n\n        {/* Three-dots menu */}\n        <UncontrolledDropdown>\n          <DropdownToggle\n            tag=\"a\"\n            className=\"nav-link\"\n            style={{ cursor: \"pointer\" }}\n          >\n            <i className=\"fa fa-ellipsis-v\" />\n          </DropdownToggle>\n          <DropdownMenu>\n            <DropdownItem onClick={() => props.history.push(\"/password\")}>Change Password</DropdownItem>\n            <DropdownItem divider />\n            <DropdownItem onClick={props.logout}>Logout</DropdownItem>\n          </DropdownMenu>\n        </UncontrolledDropdown>\n      </div>\n    </Row>\n  );\n};\n\nexport default withRouter(ChatHeader);\n","import React from \"react\";\nimport moment from 'moment';\n\n/**\n * Message item.\n */\nconst Message = props => (\n   <div className={props.message.outgoing ? 'message-item' : 'message-item incoming'}>\n       <div className=\"d-flex flex-row\">\n           <div className=\"body m-1 mr-2\">\n               <div>{props.message.content}</div>\n               <span className=\"small text-muted\">\n                   {moment(props.message.date).format(\"hh:mm a | MMM D\") }\n               </span>\n           </div>\n       </div>\n   </div>\n);\n\nexport default Message;\n","import React from \"react\";\nimport Message from \"./Message\";\n\n/**\n * Messages List Component.\n */\nclass Messages extends React.Component {\n\n    /**\n     * Render component.\n     */\n   render() {\n       return (\n           <div id=\"messages\">\n               {this.props.messages.map(this.renderMessage)}\n           </div>\n       );\n   }\n\n   renderMessage = (message, index) => {\n       message.outgoing = message.receiver !== this.props.user.id;\n       return <Message key={index} message={message} />\n   };\n\n}\n\nexport default Messages;","import React from \"react\";\nimport { Input } from \"reactstrap\";\nimport moment from \"moment\";\n\n/**\n * MessageForm Component.\n */\nclass MessageForm extends React.Component {\n\n    state = { message: '', lastType: false };\n\n    /**\n     * Handle message change event.\n     * @param e\n     */\n    onChange = e => this.setState({message: e.target.value});\n\n    /**\n     * Send message.\n     * @param e\n     */\n    onSend = e => {\n       if (!this.state.message) return;\n       let message = {\n           content: this.state.message,\n           date: new Date().getTime()\n       };\n       this.props.sender(message);\n       this.setState({message: ''});\n   };\n\n    /**\n     * Handle OnKeyDown event.\n     * @param e\n     */\n   onKeyDown = e => {\n       if (e.key === 'Enter' && !e.shiftKey) {\n           this.setState({lastType: false});\n           this.onSend();\n           e.preventDefault();\n       } else if (!this.state.lastType || moment() - this.state.lastType > 2000) {\n           this.setState({lastType: moment()});\n           this.props.sendType();\n       }\n   };\n\n    /**\n     * Render component.\n     */\n    render() {\n       return (\n           <div id=\"send-message\">\n               <Input\n                   type=\"textarea\"\n                   rows=\"1\"\n                   onChange={this.onChange}\n                   onKeyDown={this.onKeyDown}\n                   value={this.state.message}\n                   placeholder=\"Write your message here\"\n               />\n               <i className=\"fa fa-send text-muted px-3 send\" onClick={this.onSend} />\n           </div>\n       );\n   }\n\n}\n\nexport default MessageForm;\n","import React from \"react\";\nimport Avatar from 'components/Avatar';\nimport { Row } from \"reactstrap\";\n\n/**\n * UserProfile Component.\n */\nconst UserProfile = props => (\n\n    <div className={props.open ? 'side-profile open' : 'side-profile'}>\n\n        <Row className=\"heading\">\n            <div className=\"mr-2 nav-link\" onClick={props.toggle}>\n                <i className=\"fa fa-arrow-right\" />\n            </div>\n            <div>{props.contact.name}</div>\n        </Row>\n\n        <div className=\"d-flex flex-column overflow-auto\">\n            <Avatar src={props.contact.avatar}/>\n            <div className=\"bg-white px-3 py-2\">\n                <label className=\"text-muted\">Status Message</label>\n                <p>{props.contact.about ? props.contact.about : 'Hello, I am using chat me'}</p>\n            </div>\n        </div>\n\n    </div>\n\n);\n\nexport default UserProfile;\n","import React from \"react\";\nimport { Row, Form, Input, Button } from \"reactstrap\";\nimport Error from \"components/Error\";\nimport Avatar from \"components/Avatar\";\nimport axios from \"axios\";\n\n/**\n * EditProfile Component.\n */\nclass EditProfile extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // Provide a safe fallback if props.user is null/undefined\n    const user = props.user || {};\n\n    this.state = {\n      name: user.name || \"\",\n      about: user.about || \"\",\n      image: null,\n      avatar: null,\n      error: null\n    };\n\n    this.fileUpload = React.createRef();\n  }\n\n  /**\n   * Trigger click on file upload input.\n   */\n  showFileUpload = () => this.fileUpload.current.click();\n\n  /**\n   * If avatar input changed then change the preview.\n   */\n  onImageChange = (e) => {\n    if (e.target.files && e.target.files[0]) {\n      this.setState({\n        image: URL.createObjectURL(e.target.files[0]),\n        avatar: e.target.files[0]\n      });\n    }\n  };\n\n  /**\n   * Change form handler.\n   */\n  onChange = (e) => this.setState({ [e.target.name]: e.target.value, error: null });\n\n  /**\n   * Form submit handler.\n   */\n  onSubmit = (e) => {\n    e.preventDefault();\n    const data = new FormData();\n    data.append(\"name\", this.state.name);\n    data.append(\"about\", this.state.about);\n    if (this.state.avatar) {\n      data.append(\"avatar\", this.state.avatar, this.state.avatar.name);\n    }\n    axios\n      .post(\"/api/account\", data)\n      .then(this.props.toggle)\n      .catch((err) => {\n        this.setState({\n          error: err.response?.data?.message || \"An error occurred.\"\n        });\n      });\n  };\n\n  /**\n   * When closing sidebar.\n   */\n  onClose = () => {\n    // If props.user might still be null, handle that safely:\n    const user = this.props.user || {};\n    this.setState({\n      image: null,\n      avatar: null,\n      name: user.name || \"\",\n      about: user.about || \"\"\n    });\n    this.props.toggle();\n  };\n\n  /**\n   * Render component.\n   */\n  render() {\n    return (\n      <div className={this.props.open ? \"side-profile open\" : \"side-profile\"}>\n        <Row className=\"heading\">\n          <div className=\"mr-2 nav-link\" onClick={this.onClose}>\n            <i className=\"fa fa-arrow-right\" />\n          </div>\n          <div>Profile</div>\n        </Row>\n\n        <div className=\"d-flex flex-column\" style={{ overflow: \"auto\" }}>\n          <Form onSubmit={this.onSubmit}>\n            <Error error={this.state.error} />\n\n            {/* Avatar preview + image upload */}\n            <div className=\"text-center\" onClick={this.showFileUpload}>\n              <Avatar\n                // If props.user might be null, use optional chaining here:\n                src={this.props.user?.avatar}\n                file={this.state.image}\n              />\n            </div>\n\n            <input\n              type=\"file\"\n              ref={this.fileUpload}\n              onChange={this.onImageChange}\n              className=\"d-none\"\n            />\n\n            {/* Name field */}\n            <div className=\"bg-white px-4 py-2\">\n              <label className=\"text-muted\">Name</label>\n              <Input\n                value={this.state.name}\n                name=\"name\"\n                onChange={this.onChange}\n                required\n                autoComplete=\"off\"\n              />\n            </div>\n\n            {/* About field */}\n            <div className=\"bg-white px-3 py-2\">\n              <label className=\"text-muted\">Status Message</label>\n              <Input\n                value={this.state.about}\n                name=\"about\"\n                onChange={this.onChange}\n                required\n                autoComplete=\"off\"\n              />\n            </div>\n\n            {/* Submit button */}\n            <div className=\"bg-white px-3 py-2\">\n              <Button block className=\"mt-3\">\n                Save\n              </Button>\n            </div>\n          </Form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default EditProfile;\n","import axios from 'axios';\r\n\r\nconst Auth = {\r\n\r\n    /**\r\n     * Initialize axios headers.\r\n     */\r\n    init: () => {\r\n        let user = JSON.parse(localStorage.getItem('user'));\r\n        axios.defaults.headers.common['Authorization'] = user !== null ? user.token : '';\r\n    },\r\n\r\n    /**\r\n     * Store user data after login.\r\n     * @param user\r\n     */\r\n    login: user => {\r\n        localStorage.setItem('user', JSON.stringify(user));\r\n        axios.defaults.headers.common['Authorization'] = user.token;\r\n    },\r\n\r\n    /**\r\n     * Delete user data.\r\n     */\r\n    logout: () => {\r\n        delete axios.defaults.headers.common['Authorization'];\r\n        localStorage.removeItem('user');\r\n    },\r\n\r\n    /**\r\n     * Is user authenticated.\r\n     * @returns {boolean}\r\n     */\r\n    auth: () => localStorage.getItem('user') !== null,\r\n\r\n    /**\r\n     * Is guest.\r\n     * @returns {boolean}\r\n     */\r\n    guest: () => localStorage.getItem('user') === null,\r\n\r\n    /**\r\n     * Get user token.\r\n     * @returns {string}\r\n     */\r\n    getToken: () => {\r\n        let user = JSON.parse(localStorage.getItem('user'));\r\n        return user !== null ? user.token : '';\r\n    },\r\n\r\n    /**\r\n     * Set user\r\n     * @param newProfile\r\n     */\r\n    setUser: (newProfile) => {\r\n        let user = JSON.parse(localStorage.getItem('user'));\r\n        newProfile.token = user.token;\r\n        localStorage.setItem('user', JSON.stringify(newProfile));\r\n    },\r\n\r\n};\r\n\r\nexport default Auth;","/**\n * web/src/views/Chat.js\n */\n\nimport React from 'react';\nimport { Row, Spinner, Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport {\n  ContactHeader,\n  Contacts,\n  ChatHeader,\n  Messages,\n  MessageForm,\n  UserProfile,\n  EditProfile,\n} from 'components';\nimport socketIO from 'socket.io-client';\nimport Auth from 'Auth';\n\nclass Chat extends React.Component {\n  state = {\n    contacts: [],\n    contact: {},         // Will hold { id, name, ... } of the current chat\n    userProfile: false,\n    profile: false,\n\n    // Existing message-related states\n    connected: false,\n    messages: [],\n    typing: false,\n    timeout: null,\n    user: null,\n\n    // ------ CALL STATES ------\n    callState: 'idle',  // 'idle' | 'calling' | 'receiving' | 'inCall'\n    incomingCallModal: false,\n    callerInfo: null,   // Will hold { from, callerName }\n\n    // WebRTC\n    localStream: null,\n    remoteStream: null,\n    peerConnection: null,\n\n    // NEW: Store an SDP offer if it arrives before we have a peerConnection.\n    pendingOffer: null,\n  };\n\n  componentDidMount() {\n    // Initialize socket.io connection.\n    this.initSocketConnection();\n  }\n\n  // ============ SOCKET.IO CONNECTION & EVENTS ============\n  initSocketConnection = () => {\n    const socket = socketIO(process.env.REACT_APP_SOCKET, {\n      query: 'token=' + Auth.getToken(),\n    });\n\n    // --- Existing events ---\n    socket.on('connect', () => {\n      console.log('[CHAT] Socket connected');\n      this.setState({ connected: true });\n    });\n    socket.on('disconnect', () => {\n      console.log('[CHAT] Socket disconnected');\n      this.setState({ connected: false });\n    });\n    socket.on('data', this.onData);\n    socket.on('message', this.onNewMessage);\n    socket.on('user_status', this.updateUsersState);\n    socket.on('typing', this.onTypingMessage);\n    socket.on('error', this.onSocketError);\n\n    // ---------------- NEW: CALL EVENTS ----------------\n    socket.on('incomingCall', (data) => {\n      // data => { from: userId, callerName: ... }\n      console.log('[CHAT] Incoming call from:', data);\n      this.setState({\n        callState: 'receiving',\n        incomingCallModal: true,\n        callerInfo: data,   // store who is calling\n      });\n\n      // OPTIONAL: Update contact so we know who we're talking to\n      if (!this.state.contact.id || this.state.contact.id !== data.from) {\n        this.setState({\n          contact: {\n            ...this.state.contact,\n            id: data.from,\n            name: data.callerName,\n          },\n        });\n      }\n    });\n\n    // --- IMPORTANT CHANGE HERE: Store or handle the offer ---\n    socket.on('offer', ({ sdp, caller }) => {\n      console.log('[CHAT] Received offer from:', caller);\n      // If we already have a peerConnection, handle it right away.\n      if (this.state.peerConnection) {\n        this.handleOffer(sdp, caller);\n      } else {\n        // We haven't accepted the call yet => store it in state until we create peerConnection\n        console.log('[CHAT] No peerConnection yet. Storing pendingOffer...');\n        this.setState({ pendingOffer: { sdp, caller } });\n      }\n    });\n\n    socket.on('answer', ({ sdp, callee }) => {\n      console.log('[CHAT] Received answer from:', callee);\n      if (this.state.peerConnection) {\n        const desc = new RTCSessionDescription(sdp);\n        this.state.peerConnection.setRemoteDescription(desc)\n          .then(() => {\n            console.log('[CHAT] Remote description set for answer, callState = inCall');\n            this.setState({ callState: 'inCall' });\n          })\n          .catch(err => console.error('[CHAT] Error setting remote desc (answer)', err));\n      }\n    });\n\n    socket.on('iceCandidate', ({ candidate, from }) => {\n      console.log('[CHAT] Received ICE candidate from:', from);\n      if (this.state.peerConnection && candidate) {\n        this.state.peerConnection.addIceCandidate(new RTCIceCandidate(candidate))\n          .catch(e => console.error('[CHAT] Error adding ICE candidate', e));\n      }\n    });\n\n    socket.on('hangUp', () => {\n      console.log('[CHAT] Call ended by remote');\n      this.endCall();\n    });\n\n    this.setState({ socket });\n  };\n\n  // Helper to handle incoming offer -> setRemoteDesc -> createAnswer\n  handleOffer = (sdp, caller) => {\n    console.log('[CHAT] handleOffer => Setting remote desc & creating answer...');\n    const desc = new RTCSessionDescription(sdp);\n    this.state.peerConnection.setRemoteDescription(desc)\n      .then(() => {\n        console.log('[CHAT] Remote description set (offer). Creating answer...');\n        return this.state.peerConnection.createAnswer();\n      })\n      .then(answer => {\n        console.log('[CHAT] Created answer, setting local desc and sending...');\n        this.state.peerConnection.setLocalDescription(answer);\n        this.state.socket.emit('answer', {\n          sdp: answer,\n          target: caller,\n        });\n        this.setState({ callState: 'inCall' });\n      })\n      .catch(err => console.error('[CHAT] Error handling offer->answer', err));\n  };\n\n  // ============ CALLING FUNCTIONS ============\n  initiateCall = (contact) => {\n    if (!contact.id) return;\n    console.log('[CHAT] Initiating call with contact:', contact.id);\n\n    this.setState({\n      callState: 'calling',\n      contact: contact,\n    });\n\n    // Notify the callee that we're calling\n    this.state.socket.emit('callUser', {\n      recipientId: contact.id,\n      callerName: this.state.user?.username || 'Unknown Caller',\n    });\n\n    // Access microphone (audio only)\n    navigator.mediaDevices.getUserMedia({ audio: true, video: false })\n      .then(stream => {\n        console.log('[CHAT] Got localStream, tracks:', stream.getAudioTracks());\n        this.setState({ localStream: stream });\n\n        const peerConnection = this.createPeerConnection();\n\n        // Add local tracks\n        stream.getTracks().forEach(track => {\n          console.log('[CHAT] Adding local track:', track.label);\n          peerConnection.addTrack(track, stream);\n        });\n\n        // Create offer\n        peerConnection.createOffer()\n          .then(offer => {\n            console.log('[CHAT] Created offer, setting local desc');\n            peerConnection.setLocalDescription(offer);\n            console.log('[CHAT] Sending offer to server...');\n            this.state.socket.emit('offer', {\n              sdp: offer,\n              target: contact.id,\n            });\n          })\n          .catch(err => console.error('[CHAT] Offer creation error', err));\n\n        this.setState({ peerConnection });\n      })\n      .catch(err => console.error('[CHAT] getUserMedia error', err));\n  };\n\n  acceptCall = () => {\n    console.log('[CHAT] Accepting call from:', this.state.callerInfo);\n    this.setState({\n      incomingCallModal: false,\n      callState: 'inCall',\n    });\n\n    const callerId = this.state.callerInfo?.from;\n    if (callerId && (!this.state.contact.id || this.state.contact.id !== callerId)) {\n      this.setState({\n        contact: {\n          ...this.state.contact,\n          id: callerId,\n          name: this.state.callerInfo.callerName,\n        },\n      });\n    }\n\n    // Access microphone (audio only for now)\n    navigator.mediaDevices.getUserMedia({ audio: true, video: false })\n      .then(stream => {\n        console.log('[CHAT] Got localStream (callee), tracks:', stream.getAudioTracks());\n        this.setState({ localStream: stream });\n\n        const peerConnection = this.createPeerConnection();\n\n        // Add local tracks\n        stream.getTracks().forEach(track => {\n          console.log('[CHAT] Callee adding local track:', track.label);\n          peerConnection.addTrack(track, stream);\n        });\n\n        // Once the peerConnection is ready, if there's a stored pendingOffer, handle it now.\n        this.setState({ peerConnection }, () => {\n          if (this.state.pendingOffer) {\n            const { sdp, caller } = this.state.pendingOffer;\n            this.handleOffer(sdp, caller);\n            this.setState({ pendingOffer: null });\n          }\n        });\n      })\n      .catch(err => console.error('[CHAT] Error accessing mic (callee)', err));\n  };\n\n  rejectCall = () => {\n    console.log('[CHAT] Rejecting call from:', this.state.callerInfo);\n    this.setState({\n      incomingCallModal: false,\n      callState: 'idle',\n      callerInfo: null,\n      pendingOffer: null, // discard any stored offer\n    });\n    // Optionally notify the caller that call is rejected\n    // e.g. this.state.socket.emit('callRejected', {...});\n  };\n\n  createPeerConnection = () => {\n    console.log('[CHAT] Creating RTCPeerConnection...');\n    const configuration = {\n      iceServers: [\n        { urls: 'stun:stun1.l.google.com:19302' },\n        // Add a TURN server if needed for NAT traversal\n      ],\n    };\n    const peerConnection = new RTCPeerConnection(configuration);\n\n    // On ICE candidate\n    peerConnection.onicecandidate = (event) => {\n      if (event.candidate) {\n        const targetId =\n          this.state.contact.id ||\n          (this.state.callerInfo && this.state.callerInfo.from);\n        console.log('[CHAT] Sending ICE candidate to:', targetId);\n        this.state.socket.emit('iceCandidate', {\n          candidate: event.candidate,\n          target: targetId,\n        });\n      } else {\n        console.log('[CHAT] ICE gathering complete (no more candidates)');\n      }\n    };\n\n    // On track (remote stream)\n    peerConnection.ontrack = (event) => {\n      console.log('[CHAT] ontrack => remote track label:', event.track.label);\n      this.setState({ remoteStream: event.streams[0] });\n    };\n\n    // Handle connection state changes\n    peerConnection.onconnectionstatechange = () => {\n      const state = peerConnection.connectionState;\n      console.log('[CHAT] PeerConnection state:', state);\n      if (state === 'disconnected' || state === 'failed' || state === 'closed') {\n        console.log('[CHAT] PeerConnection ended, calling endCall()');\n        this.endCall();\n      }\n    };\n\n    return peerConnection;\n  };\n\n  endCall = () => {\n    console.log('[CHAT] endCall invoked');\n    const { socket, contact, callerInfo, peerConnection, localStream, callState } = this.state;\n    const targetId = contact.id || (callerInfo && callerInfo.from);\n\n    // If we are calling or in call, notify other side\n    if (callState === 'calling' || callState === 'inCall') {\n      console.log('[CHAT] Emitting hangUp to target:', targetId);\n      socket.emit('hangUp', { target: targetId });\n    }\n\n    // Close peerConnection\n    if (peerConnection) {\n      console.log('[CHAT] Closing peerConnection...');\n      peerConnection.close();\n    }\n\n    // Stop local media\n    if (localStream) {\n      console.log('[CHAT] Stopping localStream tracks');\n      localStream.getTracks().forEach(track => track.stop());\n    }\n\n    this.setState({\n      callState: 'idle',\n      peerConnection: null,\n      localStream: null,\n      remoteStream: null,\n      callerInfo: null,\n      incomingCallModal: false,\n      pendingOffer: null, // clear any pending offer\n    });\n  };\n\n  // ============ EXISTING MESSAGING LOGIC ============\n  onData = (user, contacts, messages, users) => {\n    console.log('[CHAT] onData => user:', user, ' contacts:', contacts.length);\n    let contact = contacts[0] || {};\n    this.setState({ messages, contacts, user, contact }, () => {\n      this.updateUsersState(users);\n    });\n  };\n\n  onNewMessage = (message) => {\n    if (message.sender === this.state.contact.id) {\n      this.setState({ typing: false });\n      this.state.socket.emit('seen', this.state.contact.id);\n      message.seen = true;\n    }\n    let newMessages = this.state.messages.concat(message);\n    this.setState({ messages: newMessages });\n  };\n\n  onTypingMessage = (sender) => {\n    if (this.state.contact.id !== sender) return;\n    this.setState({ typing: sender });\n    clearTimeout(this.state.timeout);\n    const timeout = setTimeout(() => this.setState({ typing: false }), 3000);\n    this.setState({ timeout });\n  };\n\n  onSocketError = (err) => {\n    console.error('[CHAT] Socket error:', err);\n    if (err === 'auth_error') {\n      Auth.logout();\n      this.props.history.push('/login');\n    }\n  };\n\n  updateUsersState = (users) => {\n    let contacts = this.state.contacts;\n    contacts.forEach((element, index) => {\n      if (users[element.id]) contacts[index].status = users[element.id];\n    });\n    this.setState({ contacts });\n    let contact = this.state.contact;\n    if (users[contact.id]) contact.status = users[contact.id];\n    this.setState({ contact });\n  };\n\n  sendMessage = (message) => {\n    if (!this.state.contact.id) return;\n    message.receiver = this.state.contact.id;\n    let newMessages = this.state.messages.concat(message);\n    this.setState({ messages: newMessages });\n    this.state.socket.emit('message', message);\n  };\n\n  sendType = () => {\n    if (this.state.contact.id) {\n      this.state.socket.emit('typing', this.state.contact.id);\n    }\n  };\n\n  logout = () => {\n    console.log('[CHAT] Logging out user');\n    this.state.socket.disconnect();\n    Auth.logout();\n    this.props.history.push('/');\n  };\n\n  // ============ RENDERING ============\n  render() {\n    if (!this.state.connected || !this.state.contacts || !this.state.messages) {\n      return <Spinner id=\"loader\" color=\"success\" />;\n    }\n\n    return (\n      <Row className=\"h-100\">\n        {/* LEFT: Contacts Section */}\n        <div id=\"contacts-section\" className=\"col-6 col-md-4\">\n          <ContactHeader user={this.state.user} toggle={this.profileToggle} />\n          <Contacts\n            contacts={this.state.contacts}\n            messages={this.state.messages}\n            onChatNavigate={this.onChatNavigate}\n          />\n          <UserProfile\n            contact={this.state.contact}\n            toggle={this.userProfileToggle}\n            open={this.state.userProfile}\n          />\n          <EditProfile\n            user={this.state.user}\n            toggle={this.profileToggle}\n            open={this.state.profile}\n          />\n        </div>\n\n        {/* RIGHT: Messages Section */}\n        <div id=\"messages-section\" className=\"col-6 col-md-8\">\n          <ChatHeader\n            contact={this.state.contact}\n            typing={this.state.typing}\n            toggle={this.userProfileToggle}\n            logout={this.logout}\n            // pass the call method so ChatHeader can call\n            onCall={this.initiateCall}\n          />\n          {this.renderChat()}\n          <MessageForm sender={this.sendMessage} sendType={this.sendType} />\n\n          {/* Hang Up button if in a call */}\n          {(this.state.callState === 'calling' || this.state.callState === 'inCall') && (\n            <Button color=\"danger\" onClick={this.endCall} className=\"mt-2\">\n              Hang Up\n            </Button>\n          )}\n\n          {/* Audio element for remote stream */}\n          {this.state.remoteStream && (\n            <audio\n              ref={(audioEl) => {\n                if (audioEl && this.state.remoteStream) {\n                  console.log('[CHAT] Attaching remoteStream to audio element');\n                  audioEl.srcObject = this.state.remoteStream;\n                }\n              }}\n              autoPlay\n            />\n          )}\n        </div>\n\n        {/* INCOMING CALL MODAL */}\n        <Modal isOpen={this.state.incomingCallModal}>\n          <ModalHeader>Incoming Call</ModalHeader>\n          <ModalBody>\n            {this.state.callerInfo && (\n              <p>{this.state.callerInfo.callerName} is calling...</p>\n            )}\n          </ModalBody>\n          <ModalFooter>\n            <Button color=\"success\" onClick={this.acceptCall}>Accept</Button>\n            <Button color=\"secondary\" onClick={this.rejectCall}>Reject</Button>\n          </ModalFooter>\n        </Modal>\n      </Row>\n    );\n  }\n\n  renderChat = () => {\n    const { contact, user, messages } = this.state;\n    if (!contact || !contact.id) return null;\n    let filtered = messages.filter(\n      (m) => m.sender === contact.id || m.receiver === contact.id\n    );\n    return <Messages user={user} messages={filtered} />;\n  };\n\n  onChatNavigate = (contact) => {\n    console.log('[CHAT] onChatNavigate => switching to contact:', contact.id);\n    this.setState({ contact });\n    this.state.socket.emit('seen', contact.id);\n    let newMessages = this.state.messages.map((m) => {\n      if (m.sender === contact.id) {\n        return { ...m, seen: true };\n      }\n      return m;\n    });\n    this.setState({ messages: newMessages });\n  };\n\n  userProfileToggle = () => this.setState({ userProfile: !this.state.userProfile });\n  profileToggle = () => this.setState({ profile: !this.state.profile });\n}\n\nexport default Chat;\n","import React from 'react';\n\n/**\n * NotFound Component Page.\n * @param props\n */\nconst NotFound = props => {\n    return (\n        <h3>The requested page was not found</h3>\n    );\n};\n\nexport default NotFound;\n","export default __webpack_public_path__ + \"static/media/logo.2e5b0bba.png\";","import React from 'react';\nimport './auth.css'; // استيراد ملف CSS الجديد\nimport { Link } from 'react-router-dom';\nimport { Card, Form, Input, Button } from 'reactstrap';\nimport Error from 'components/Error';\nimport Logo from 'assets/logo.png';\nimport Auth from 'Auth';\nimport axios from 'axios';\n\nclass Register extends React.Component {\n  state = { name: '', username: '', password: '', error: '' };\n\n  onChange = e => this.setState({ [e.target.name]: e.target.value, error: null });\n\n  onSubmit = e => {\n    e.preventDefault();\n    let data = { name: this.state.name, username: this.state.username, password: this.state.password };\n    axios.post('/api/auth/register', data)\n      .then(res => {\n        Auth.login(res.data);\n        this.props.history.push('/');\n      })\n      .catch(err => this.setState({ error: err.response.data.message }));\n  };\n\n  render() {\n    return (\n      <div className=\"auth-container\">\n        <Form onSubmit={this.onSubmit}>\n          <img src={Logo} alt=\"Logo\" />\n          <h5 className=\"auth-header\">Create a New Account</h5>\n          <Error error={this.state.error} />\n          <Input className=\"auth-form-control\" value={this.state.name} name=\"name\" onChange={this.onChange} placeholder=\"Name\" required />\n          <Input className=\"auth-form-control\" value={this.state.username} name=\"username\" onChange={this.onChange} placeholder=\"Username\" required />\n          <Input type=\"password\" className=\"auth-form-control\" value={this.state.password} name=\"password\" onChange={this.onChange} placeholder=\"Password\" required />\n          <Button className=\"auth-button\" block>Create</Button>\n          <small className=\"auth-footer\">\n            <Link to=\"/login\">Login</Link>\n          </small>\n          <p className=\"auth-footer\">&copy; {new Date().getFullYear()}</p>\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default Register;\n","import React from 'react';\nimport './auth.css'; // استيراد ملف CSS الجديد\nimport { Link } from 'react-router-dom';\nimport { Card, Form, Input, Button } from 'reactstrap';\nimport Error from 'components/Error';\nimport Logo from 'assets/logo.png';\nimport Auth from 'Auth';\nimport axios from 'axios';\n\nclass Login extends React.Component {\n  state = { username: '', password: '', error: '' };\n\n  onChange = e => this.setState({ [e.target.name]: e.target.value, error: null });\n\n  onSubmit = e => {\n    e.preventDefault();\n    let data = { username: this.state.username, password: this.state.password };\n    axios.post('/api/auth', data)\n      .then(res => {\n        Auth.login(res.data);\n        this.props.history.push('/');\n      })\n      .catch(err => this.setState({ error: err.response.data.message }));\n  };\n\n  render() {\n    return (\n      <div className=\"auth-container\">\n        <Form onSubmit={this.onSubmit}>\n          <img src={Logo} alt=\"Logo\" />\n          <h5 className=\"auth-header\">Login</h5>\n          <Error error={this.state.error} />\n          <Input className=\"auth-form-control\" value={this.state.username} name=\"username\" onChange={this.onChange} placeholder=\"Username\" required />\n          <Input type=\"password\" className=\"auth-form-control\" value={this.state.password} name=\"password\" onChange={this.onChange} placeholder=\"Password\" required />\n          <Button className=\"auth-button\" block>Login</Button>\n          <small className=\"auth-footer\">\n            <Link to=\"/register\">Create a new account</Link>\n          </small>\n          <p className=\"auth-footer\">&copy; {new Date().getFullYear()}</p>\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Card, Form, Input, Button } from \"reactstrap\";\nimport { Error } from \"components\";\nimport axios from \"axios\";\nimport logo from 'assets/logo.png';\n\n/**\n * Change Password Component.\n */\nclass Password extends React.Component {\n\n   state = {password: '', newPassword: ''};\n\n    /**\n     * Change form handler\n     * @param e\n     */\n    onChange = e => this.setState({\n       [e.target.name]: e.target.value, error: null\n   });\n\n    /**\n     * Form submit handler.\n     * @param e\n     */\n    onSubmit = e => {\n       e.preventDefault();\n       let data = { password: this.state.password, newPassword: this.state.newPassword };\n       axios.post('/api/account/password', data)\n       .then(res => {\n           this.props.history.push('/')\n       })\n       .catch(err => {\n           this.setState({error: err.response.data.message });\n       });\n   };\n\n    /**\n     * Render Component.\n     */\n    render(){\n       return (\n           <Card className=\"auth col-lg-3 col-sm-6\">\n               <Form onSubmit={this.onSubmit}>\n                   <img src={logo} alt=\"\" width=\"200\" />\n                   <h5 className=\"mb-4\">Change Password</h5>\n                   <Error error={this.state.error} />\n                   <Input type=\"password\" value={this.state.password} name=\"password\" onChange={this.onChange} placeholder=\"Current Password\" required />\n                   <Input type=\"password\" value={this.state.newPassword} name=\"newPassword\" onChange={this.onChange} placeholder=\"New Password\" required />\n                   <Button block className=\"mb-3\">Change</Button>\n                   <small><Link to=\"/\">Back</Link></small>\n                   <p className=\"m-3 mb-3 text-muted\">&copy; { new Date().getFullYear() }</p>\n               </Form>\n           </Card>\n       );\n   }\n\n}\n\nexport default Password;\n","import React, { Component } from 'react';\r\nimport { BrowserRouter as Router, Switch } from 'react-router-dom';\r\nimport AppRoute from './AppRoute';\r\nimport { Chat, NotFound, Register, Login, Password } from 'views';\r\nimport Auth from './Auth';\r\n\r\nclass App extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        Auth.init();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n           <div id=\"main-container\" className=\"container-fluid\">\r\n               <Router>\r\n                   <Switch>\r\n                       <AppRoute path='/' exact component={Chat} can={Auth.auth} redirect='/login' />\r\n                       <AppRoute path='/password' component={Password} can={Auth.auth} redirect='/login' />\r\n                       <AppRoute path='/password' component={Password} can={Auth.auth} redirect='/login' />\r\n                       <AppRoute path='/register' component={Register} can={Auth.guest} redirect='/' />\r\n                       <AppRoute path='/Login' component={Login} can={Auth.guest} redirect='/' />\r\n                       <AppRoute component={NotFound} />\r\n                   </Switch>\r\n               </Router>\r\n           </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\n\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}