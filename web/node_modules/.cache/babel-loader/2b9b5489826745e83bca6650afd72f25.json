{"ast":null,"code":"import _classCallCheck from \"C:/Users/moaid/Desktop/chat-app-master/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/moaid/Desktop/chat-app-master/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"C:/Users/moaid/Desktop/chat-app-master/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/moaid/Desktop/chat-app-master/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\moaid\\\\Desktop\\\\chat-app-master\\\\web\\\\src\\\\components\\\\side\\\\EditProfile.js\";\nimport React from \"react\";\nimport { Row, Form, Input, Button } from \"reactstrap\";\nimport Error from \"components/Error\";\nimport Avatar from \"components/Avatar\";\nimport axios from \"axios\";\n/**\n * EditProfile Component.\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar EditProfile = /*#__PURE__*/function (_React$Component) {\n  _inherits(EditProfile, _React$Component);\n\n  var _super = _createSuper(EditProfile);\n\n  function EditProfile(props) {\n    var _this;\n\n    _classCallCheck(this, EditProfile);\n\n    _this = _super.call(this, props); // Provide a safe fallback if props.user is null/undefined\n\n    _this.showFileUpload = function () {\n      return _this.fileUpload.current.click();\n    };\n\n    _this.onImageChange = function (e) {\n      if (e.target.files && e.target.files[0]) {\n        _this.setState({\n          image: URL.createObjectURL(e.target.files[0]),\n          avatar: e.target.files[0]\n        });\n      }\n    };\n\n    _this.onChange = function (e) {\n      return _this.setState({\n        [e.target.name]: e.target.value,\n        error: null\n      });\n    };\n\n    _this.onSubmit = function (e) {\n      e.preventDefault();\n      var data = new FormData();\n      data.append(\"name\", _this.state.name);\n      data.append(\"about\", _this.state.about);\n\n      if (_this.state.avatar) {\n        data.append(\"avatar\", _this.state.avatar, _this.state.avatar.name);\n      }\n\n      axios.post(\"/api/account\", data).then(_this.props.toggle).catch(function (err) {\n        var _err$response, _err$response$data;\n\n        _this.setState({\n          error: ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"An error occurred.\"\n        });\n      });\n    };\n\n    _this.onClose = function () {\n      // If props.user might still be null, handle that safely:\n      var user = _this.props.user || {};\n\n      _this.setState({\n        image: null,\n        avatar: null,\n        name: user.name || \"\",\n        about: user.about || \"\"\n      });\n\n      _this.props.toggle();\n    };\n\n    var _user = props.user || {};\n\n    _this.state = {\n      name: _user.name || \"\",\n      about: _user.about || \"\",\n      image: null,\n      avatar: null,\n      error: null\n    };\n    _this.fileUpload = /*#__PURE__*/React.createRef();\n    return _this;\n  }\n  /**\n   * Trigger click on file upload input.\n   */\n\n\n  _createClass(EditProfile, [{\n    key: \"render\",\n    value:\n    /**\n     * Render component.\n     */\n    function render() {\n      var _this$props$user;\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: this.props.open ? \"side-profile open\" : \"side-profile\",\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          className: \"heading\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mr-2 nav-link\",\n            onClick: this.onClose,\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-arrow-right\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex flex-column\",\n          style: {\n            overflow: \"auto\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Form, {\n            onSubmit: this.onSubmit,\n            children: [/*#__PURE__*/_jsxDEV(Error, {\n              error: this.state.error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              onClick: this.showFileUpload,\n              children: /*#__PURE__*/_jsxDEV(Avatar // If props.user might be null, use optional chaining here:\n              , {\n                src: (_this$props$user = this.props.user) === null || _this$props$user === void 0 ? void 0 : _this$props$user.avatar,\n                file: this.state.image\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              ref: this.fileUpload,\n              onChange: this.onImageChange,\n              className: \"d-none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white px-4 py-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"text-muted\",\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                value: this.state.name,\n                name: \"name\",\n                onChange: this.onChange,\n                required: true,\n                autoComplete: \"off\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white px-3 py-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"text-muted\",\n                children: \"Status Message\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                value: this.state.about,\n                name: \"about\",\n                onChange: this.onChange,\n                required: true,\n                autoComplete: \"off\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white px-3 py-2\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                block: true,\n                className: \"mt-3\",\n                children: \"Save\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return EditProfile;\n}(React.Component);\n\nexport default EditProfile;","map":{"version":3,"sources":["C:/Users/moaid/Desktop/chat-app-master/web/src/components/side/EditProfile.js"],"names":["React","Row","Form","Input","Button","Error","Avatar","axios","EditProfile","props","showFileUpload","fileUpload","current","click","onImageChange","e","target","files","setState","image","URL","createObjectURL","avatar","onChange","name","value","error","onSubmit","preventDefault","data","FormData","append","state","about","post","then","toggle","catch","err","response","message","onClose","user","createRef","open","overflow","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Row, Form, Input, Button } from \"reactstrap\";\nimport Error from \"components/Error\";\nimport Avatar from \"components/Avatar\";\nimport axios from \"axios\";\n\n/**\n * EditProfile Component.\n */\nclass EditProfile extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // Provide a safe fallback if props.user is null/undefined\n    const user = props.user || {};\n\n    this.state = {\n      name: user.name || \"\",\n      about: user.about || \"\",\n      image: null,\n      avatar: null,\n      error: null\n    };\n\n    this.fileUpload = React.createRef();\n  }\n\n  /**\n   * Trigger click on file upload input.\n   */\n  showFileUpload = () => this.fileUpload.current.click();\n\n  /**\n   * If avatar input changed then change the preview.\n   */\n  onImageChange = (e) => {\n    if (e.target.files && e.target.files[0]) {\n      this.setState({\n        image: URL.createObjectURL(e.target.files[0]),\n        avatar: e.target.files[0]\n      });\n    }\n  };\n\n  /**\n   * Change form handler.\n   */\n  onChange = (e) => this.setState({ [e.target.name]: e.target.value, error: null });\n\n  /**\n   * Form submit handler.\n   */\n  onSubmit = (e) => {\n    e.preventDefault();\n    const data = new FormData();\n    data.append(\"name\", this.state.name);\n    data.append(\"about\", this.state.about);\n    if (this.state.avatar) {\n      data.append(\"avatar\", this.state.avatar, this.state.avatar.name);\n    }\n    axios\n      .post(\"/api/account\", data)\n      .then(this.props.toggle)\n      .catch((err) => {\n        this.setState({\n          error: err.response?.data?.message || \"An error occurred.\"\n        });\n      });\n  };\n\n  /**\n   * When closing sidebar.\n   */\n  onClose = () => {\n    // If props.user might still be null, handle that safely:\n    const user = this.props.user || {};\n    this.setState({\n      image: null,\n      avatar: null,\n      name: user.name || \"\",\n      about: user.about || \"\"\n    });\n    this.props.toggle();\n  };\n\n  /**\n   * Render component.\n   */\n  render() {\n    return (\n      <div className={this.props.open ? \"side-profile open\" : \"side-profile\"}>\n        <Row className=\"heading\">\n          <div className=\"mr-2 nav-link\" onClick={this.onClose}>\n            <i className=\"fa fa-arrow-right\" />\n          </div>\n          <div>Profile</div>\n        </Row>\n\n        <div className=\"d-flex flex-column\" style={{ overflow: \"auto\" }}>\n          <Form onSubmit={this.onSubmit}>\n            <Error error={this.state.error} />\n\n            {/* Avatar preview + image upload */}\n            <div className=\"text-center\" onClick={this.showFileUpload}>\n              <Avatar\n                // If props.user might be null, use optional chaining here:\n                src={this.props.user?.avatar}\n                file={this.state.image}\n              />\n            </div>\n\n            <input\n              type=\"file\"\n              ref={this.fileUpload}\n              onChange={this.onImageChange}\n              className=\"d-none\"\n            />\n\n            {/* Name field */}\n            <div className=\"bg-white px-4 py-2\">\n              <label className=\"text-muted\">Name</label>\n              <Input\n                value={this.state.name}\n                name=\"name\"\n                onChange={this.onChange}\n                required\n                autoComplete=\"off\"\n              />\n            </div>\n\n            {/* About field */}\n            <div className=\"bg-white px-3 py-2\">\n              <label className=\"text-muted\">Status Message</label>\n              <Input\n                value={this.state.about}\n                name=\"about\"\n                onChange={this.onChange}\n                required\n                autoComplete=\"off\"\n              />\n            </div>\n\n            {/* Submit button */}\n            <div className=\"bg-white px-3 py-2\">\n              <Button block className=\"mt-3\">\n                Save\n              </Button>\n            </div>\n          </Form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default EditProfile;\n"]},"metadata":{},"sourceType":"module"}