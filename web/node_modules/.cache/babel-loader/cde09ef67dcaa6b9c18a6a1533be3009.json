{"ast":null,"code":"import _classCallCheck from\"C:/Users/moaid/Desktop/chat-app-master/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/moaid/Desktop/chat-app-master/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/moaid/Desktop/chat-app-master/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/moaid/Desktop/chat-app-master/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import{Row,Form,Input,Button}from\"reactstrap\";import Error from\"components/Error\";import Avatar from\"components/Avatar\";import axios from\"axios\";/**\n * EditProfile Component.\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditProfile=/*#__PURE__*/function(_React$Component){_inherits(EditProfile,_React$Component);var _super=_createSuper(EditProfile);function EditProfile(props){var _this;_classCallCheck(this,EditProfile);_this=_super.call(this,props);// Provide a safe fallback if props.user is null/undefined\n_this.showFileUpload=function(){return _this.fileUpload.current.click();};_this.onImageChange=function(e){if(e.target.files&&e.target.files[0]){_this.setState({image:URL.createObjectURL(e.target.files[0]),avatar:e.target.files[0]});}};_this.onChange=function(e){return _this.setState({[e.target.name]:e.target.value,error:null});};_this.onSubmit=function(e){e.preventDefault();var data=new FormData();data.append(\"name\",_this.state.name);data.append(\"about\",_this.state.about);if(_this.state.avatar){data.append(\"avatar\",_this.state.avatar,_this.state.avatar.name);}axios.post(\"/api/account\",data).then(_this.props.toggle).catch(function(err){var _err$response,_err$response$data;_this.setState({error:((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"An error occurred.\"});});};_this.onClose=function(){// If props.user might still be null, handle that safely:\nvar user=_this.props.user||{};_this.setState({image:null,avatar:null,name:user.name||\"\",about:user.about||\"\"});_this.props.toggle();};var _user=props.user||{};_this.state={name:_user.name||\"\",about:_user.about||\"\",image:null,avatar:null,error:null};_this.fileUpload=/*#__PURE__*/React.createRef();return _this;}/**\n   * Trigger click on file upload input.\n   */_createClass(EditProfile,[{key:\"render\",value:/**\n   * Render component.\n   */function render(){var _this$props$user;return/*#__PURE__*/_jsxs(\"div\",{className:this.props.open?\"side-profile open\":\"side-profile\",children:[/*#__PURE__*/_jsxs(Row,{className:\"heading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mr-2 nav-link\",onClick:this.onClose,children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-arrow-right\"})}),/*#__PURE__*/_jsx(\"div\",{children:\"Profile\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-column\",style:{overflow:\"auto\"},children:/*#__PURE__*/_jsxs(Form,{onSubmit:this.onSubmit,children:[/*#__PURE__*/_jsx(Error,{error:this.state.error}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",onClick:this.showFileUpload,children:/*#__PURE__*/_jsx(Avatar// If props.user might be null, use optional chaining here:\n,{src:(_this$props$user=this.props.user)===null||_this$props$user===void 0?void 0:_this$props$user.avatar,file:this.state.image})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:this.fileUpload,onChange:this.onImageChange,className:\"d-none\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white px-4 py-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-muted\",children:\"Name\"}),/*#__PURE__*/_jsx(Input,{value:this.state.name,name:\"name\",onChange:this.onChange,required:true,autoComplete:\"off\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white px-3 py-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-muted\",children:\"Status Message\"}),/*#__PURE__*/_jsx(Input,{value:this.state.about,name:\"about\",onChange:this.onChange,required:true,autoComplete:\"off\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white px-3 py-2\",children:/*#__PURE__*/_jsx(Button,{block:true,className:\"mt-3\",children:\"Save\"})})]})})]});}}]);return EditProfile;}(React.Component);export default EditProfile;","map":{"version":3,"sources":["C:/Users/moaid/Desktop/chat-app-master/web/src/components/side/EditProfile.js"],"names":["React","Row","Form","Input","Button","Error","Avatar","axios","EditProfile","props","showFileUpload","fileUpload","current","click","onImageChange","e","target","files","setState","image","URL","createObjectURL","avatar","onChange","name","value","error","onSubmit","preventDefault","data","FormData","append","state","about","post","then","toggle","catch","err","response","message","onClose","user","createRef","open","overflow","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Row, Form, Input, Button } from \"reactstrap\";\nimport Error from \"components/Error\";\nimport Avatar from \"components/Avatar\";\nimport axios from \"axios\";\n\n/**\n * EditProfile Component.\n */\nclass EditProfile extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // Provide a safe fallback if props.user is null/undefined\n    const user = props.user || {};\n\n    this.state = {\n      name: user.name || \"\",\n      about: user.about || \"\",\n      image: null,\n      avatar: null,\n      error: null\n    };\n\n    this.fileUpload = React.createRef();\n  }\n\n  /**\n   * Trigger click on file upload input.\n   */\n  showFileUpload = () => this.fileUpload.current.click();\n\n  /**\n   * If avatar input changed then change the preview.\n   */\n  onImageChange = (e) => {\n    if (e.target.files && e.target.files[0]) {\n      this.setState({\n        image: URL.createObjectURL(e.target.files[0]),\n        avatar: e.target.files[0]\n      });\n    }\n  };\n\n  /**\n   * Change form handler.\n   */\n  onChange = (e) => this.setState({ [e.target.name]: e.target.value, error: null });\n\n  /**\n   * Form submit handler.\n   */\n  onSubmit = (e) => {\n    e.preventDefault();\n    const data = new FormData();\n    data.append(\"name\", this.state.name);\n    data.append(\"about\", this.state.about);\n    if (this.state.avatar) {\n      data.append(\"avatar\", this.state.avatar, this.state.avatar.name);\n    }\n    axios\n      .post(\"/api/account\", data)\n      .then(this.props.toggle)\n      .catch((err) => {\n        this.setState({\n          error: err.response?.data?.message || \"An error occurred.\"\n        });\n      });\n  };\n\n  /**\n   * When closing sidebar.\n   */\n  onClose = () => {\n    // If props.user might still be null, handle that safely:\n    const user = this.props.user || {};\n    this.setState({\n      image: null,\n      avatar: null,\n      name: user.name || \"\",\n      about: user.about || \"\"\n    });\n    this.props.toggle();\n  };\n\n  /**\n   * Render component.\n   */\n  render() {\n    return (\n      <div className={this.props.open ? \"side-profile open\" : \"side-profile\"}>\n        <Row className=\"heading\">\n          <div className=\"mr-2 nav-link\" onClick={this.onClose}>\n            <i className=\"fa fa-arrow-right\" />\n          </div>\n          <div>Profile</div>\n        </Row>\n\n        <div className=\"d-flex flex-column\" style={{ overflow: \"auto\" }}>\n          <Form onSubmit={this.onSubmit}>\n            <Error error={this.state.error} />\n\n            {/* Avatar preview + image upload */}\n            <div className=\"text-center\" onClick={this.showFileUpload}>\n              <Avatar\n                // If props.user might be null, use optional chaining here:\n                src={this.props.user?.avatar}\n                file={this.state.image}\n              />\n            </div>\n\n            <input\n              type=\"file\"\n              ref={this.fileUpload}\n              onChange={this.onImageChange}\n              className=\"d-none\"\n            />\n\n            {/* Name field */}\n            <div className=\"bg-white px-4 py-2\">\n              <label className=\"text-muted\">Name</label>\n              <Input\n                value={this.state.name}\n                name=\"name\"\n                onChange={this.onChange}\n                required\n                autoComplete=\"off\"\n              />\n            </div>\n\n            {/* About field */}\n            <div className=\"bg-white px-3 py-2\">\n              <label className=\"text-muted\">Status Message</label>\n              <Input\n                value={this.state.about}\n                name=\"about\"\n                onChange={this.onChange}\n                required\n                autoComplete=\"off\"\n              />\n            </div>\n\n            {/* Submit button */}\n            <div className=\"bg-white px-3 py-2\">\n              <Button block className=\"mt-3\">\n                Save\n              </Button>\n            </div>\n          </Form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default EditProfile;\n"]},"metadata":{},"sourceType":"module"}